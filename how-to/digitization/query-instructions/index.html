<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.6.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><meta name=author content="Will Hanley"><meta name=description content="Objective We are digitizing the Egyptian Gazette to make its contents searchable. Plain text can be searched with keywords, but TEI-XML encoded text can be searched in more precise ways. For example, if you search for &ldquo;London&rdquo; in plain text, you would find hundreds and hundreds of repeated references to London in ads and tables."><link rel=alternate hreflang=en-us href=https://dig-eg-gaz.github.io/how-to/digitization/query-instructions/><meta name=theme-color content="#1565c0"><link rel=stylesheet href=/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css integrity="sha512-W0xM4mr6dEP9nREo7Z9z+9X70wytKvMGeDsj7ps2+xg5QPrEBXC8tAW1IFnzjR6eoJ90JmCnFzerQJTLzIEHjA==" crossorigin=anonymous media=print onload='this.media="all"'><link rel=stylesheet href=/css/wowchemy.e16b071c3437dd38fe4bc6049c3c2fff.css><link rel=stylesheet href=/css/libs/chroma/github-light.min.css title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=/css/libs/chroma/dracula.min.css title=hl-dark media=print onload='this.media="all"' disabled><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu3ccbb7e8d76090b34f602b231dc00fc8_804790_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu3ccbb7e8d76090b34f602b231dc00fc8_804790_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://dig-eg-gaz.github.io/how-to/digitization/query-instructions/><meta property="twitter:card" content="summary"><meta property="og:site_name" content="Digital Egyptian Gazette"><meta property="og:url" content="https://dig-eg-gaz.github.io/how-to/digitization/query-instructions/"><meta property="og:title" content="Querying the Digital Egyptian Gazette | Digital Egyptian Gazette"><meta property="og:description" content="Objective We are digitizing the Egyptian Gazette to make its contents searchable. Plain text can be searched with keywords, but TEI-XML encoded text can be searched in more precise ways. For example, if you search for &ldquo;London&rdquo; in plain text, you would find hundreds and hundreds of repeated references to London in ads and tables."><meta property="og:image" content="https://dig-eg-gaz.github.io/media/icon_hu3ccbb7e8d76090b34f602b231dc00fc8_804790_512x512_fill_lanczos_center_3.png"><meta property="twitter:image" content="https://dig-eg-gaz.github.io/media/icon_hu3ccbb7e8d76090b34f602b231dc00fc8_804790_512x512_fill_lanczos_center_3.png"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2016-09-30T00:00:00+00:00"><meta property="article:modified_time" content="2016-09-30T00:00:00+00:00"><title>Querying the Digital Egyptian Gazette | Digital Egyptian Gazette</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=0d0bcf3fcdbf8bdf120acd5ffbe57f96><script src=/js/wowchemy-init.min.613040fe4f2c0f007b4dcb64404201cb.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=Close><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search class=form-control aria-label=Search...></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Digital Egyptian Gazette</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Digital Egyptian Gazette</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/issues><span>Contents</span></a></li><li class=nav-item><a class=nav-link href=/post><span>Posts</span></a></li><li class=nav-item><a class="nav-link active" href=/how-to><span>How To</span></a></li><li class=nav-item><a class=nav-link href=/resources><span>Resources</span></a></li><li class=nav-item><a class=nav-link href=/#about><span>Contact</span></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=Search><i class="fas fa-search" aria-hidden=true></i></a></li><li class="nav-item dropdown theme-dropdown"><a href=# class=nav-link data-toggle=dropdown aria-haspopup=true aria-label="Display preferences"><i class="fas fa-moon" aria-hidden=true></i></a><div class=dropdown-menu><a href=# class="dropdown-item js-set-theme-light"><span>Light</span></a>
<a href=# class="dropdown-item js-set-theme-dark"><span>Dark</span></a>
<a href=# class="dropdown-item js-set-theme-auto"><span>Automatic</span></a></div></li></ul></div></nav></header></div><div class=page-body><div class="container-fluid docs"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 docs-sidebar"><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">Digitization</span>
<span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>Search...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li><a href=/how-to/>How to</a></li><div class=docs-toc-item><a class=docs-toc-link href=/how-to/digitization/>Digitization</a><ul class="nav docs-sidenav"><li><a href=/how-to/digitization/setup-instructions/>Set-up</a></li><li><a href=/how-to/digitization/microfilm-instructions/>Microfilm</a></li><li><a href=/how-to/digitization/tei-xml-instructions/>TEI-XML</a></li><li><a href=/how-to/digitization/templating-instructions/>Templating</a></li><li><a href=/how-to/digitization/github-instructions/>GitHub</a></li><li><a href=/how-to/digitization/ocr-instructions/>OCR</a></li><li><a href=/how-to/digitization/content-markup-instructions/>Content markup</a></li><li><a href=/how-to/digitization/polished-tei-instructions/>Polished TEI</a></li><li><a href=/how-to/digitization/text-editor-instructions/>Plain text</a></li><li><a href=/how-to/digitization/tagging-people-and-places-instructions/>Advanced tagging</a></li><li class=active><a href=/how-to/digitization/query-instructions/>Querying</a></li><li><a href=/how-to/digitization/regular-expression-instructions/>Regular expressions</a></li><li><a href=/how-to/digitization/exploratory-visualization/>Exploratory visualization</a></li><li><a href=/how-to/digitization/visualization-instructions/>Data visualization</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=/how-to/course-specific/>Course-specific instructions</a><ul class="nav docs-sidenav"><li><a href=/how-to/course-specific/blogging-instructions/>Blogging</a></li><li><a href=/how-to/course-specific/serial-question-instructions/>Serial question</a></li><li><a href=/how-to/course-specific/data-revision-instruction/>Data revision</a></li><li><a href=/how-to/course-specific/tutorials-instructions/>Tutorials</a></li><li><a href=/how-to/course-specific/wikipedia-instructions/>Wikipedia</a></li></ul></div></ul></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>Contents</a></li></ul><nav id=TableOfContents><ul><li><a href=#objective>Objective</a></li><li><a href=#1-setting-up-queries-in-the-oxygen-xml-editor>1. Setting up queries in the Oxygen XML editor</a><ul><li><a href=#a-find-and-replace>A) Find and Replace</a></li><li><a href=#b-xpath-query-bar>B) XPath query bar</a></li></ul></li><li><a href=#2-the-what-and-where-of-xpath>2. The What and Where of XPath</a><ul><li><a href=#where-searches>&ldquo;Where&rdquo; searches</a></li><li><a href=#what-searches>&ldquo;What&rdquo; searches</a></li></ul></li><li><a href=#3-navigating-the-tree>3. Navigating the tree</a><ul><li><a href=#search-using-xmlid-or-feature>Search using xml:id or feature</a></li></ul></li><li><a href=#4-working-with-tables>4. Working with tables</a></li><li><a href=#5-recipe-book>5. Recipe book</a><ul><li><a href=#searching-for-instances-of-particular-words>Searching for instances of particular words</a></li><li><a href=#counting-instances>Counting instances</a></li><li><a href=#item-length>Item length</a></li><li><a href=#exclude-sectiondivpage>Exclude Section/div/Page</a></li><li><a href=#search-for-one-word-but-not-another>Search for one word but not another</a></li></ul></li><li><a href=#6-searching-with-regular-expressions>6. Searching with regular expressions</a></li><li><a href=#7-export-and-manipulate-results>7. Export and manipulate results</a></li><li><a href=#8-xquery>8. XQuery</a></li><li><a href=#9-resources>9. Resources</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role=main><article class=article><div class=docs-article-container></div><div class=docs-article-container><h1>Querying the Digital Egyptian Gazette</h1><div class=article-style><h2 id=objective>Objective</h2><p>We are digitizing the <em>Egyptian Gazette</em> to make its contents searchable. Plain text can be searched with keywords, but TEI-XML encoded text can be searched in more precise ways. For example, if you search for &ldquo;London&rdquo; in plain text, you would find hundreds and hundreds of repeated references to London in ads and tables. TEI-XML allows you to search for &ldquo;London&rdquo; in <em>specific parts</em> of the newspaper: page 3, for example, or local news. Restricting your search to these locations can give you more useful results.</p><p>The two main query (search) languages for XML are <a href=https://www.w3.org/TR/xpath-datamodel-30/ target=_blank rel=noopener>XPath and XQuery</a>. This tutorial focuses on XPath as used in the Oxygen XML editor. An XPath is a series of terms (words) separated by slashes (/) and other punctuation that describes a specific location or locations in an XML file. For example, the XPath <code>//div[@type="section"]/div/p[contains(., 'cotton')]</code> describes paragraphs containing the word &ldquo;cotton&rdquo; that are contained in any <code>div</code> that is itself contained in a <code>div</code> that is defined as a section. This tutorial explains how to use this powerful tool.</p><h2 id=1-setting-up-queries-in-the-oxygen-xml-editor>1. Setting up queries in the Oxygen XML editor</h2><p>Oxygen XML Editor allows you to run queries in several different ways. For our purposes, the most useful are a) Find and Replace and b) the XPath query bar</p><h3 id=a-find-and-replace>A) Find and Replace</h3><p>If you are searching for a specific word or phrase, or searching using regular expressions, it&rsquo;s easiest to use Find and Replace. You can search for the word everywhere in a file, or in specific parts of that file, by restricting the search to a certain XPath.</p><h4 id=searching-a-single-file>Searching a single file</h4><p>Open the file that you wish to search in the Oxygen XML editor. Then, click on Find/Replace (the magnifying glass). This will allow you to search for a keyword in the open file. The results will be displayed at the bottom of the editor. Click on any item in this list to be taken to that location in your file.</p><p>As an example, search for <code>Egypt</code>. Then, search for <code>Egypt</code>, but restrict your XPath to <code>div[@type="page"][@n="3"]</code>, which will restrict your search to page 3 only. Copmpare the results of these two searches.</p><h4 id=searching-several-files>Searching several files</h4><p>Open all of the files that you wish to search, then click on Find/Replace in Files:<figure><div class="d-flex justify-content-center"><div class=w-100><img alt="find replace oxygen" srcset="/media/find-replace-oxygen_hubbf0125814dc2a5b5163660a37ccf43d_20012_0db22067b82b27038dbb0133cefe0a29.webp 400w,
/media/find-replace-oxygen_hubbf0125814dc2a5b5163660a37ccf43d_20012_fdcc3addd59ad85d9e4934cca2cc7318.webp 760w,
/media/find-replace-oxygen_hubbf0125814dc2a5b5163660a37ccf43d_20012_1200x1200_fit_q75_h2_lanczos_3.webp 1200w" src=/media/find-replace-oxygen_hubbf0125814dc2a5b5163660a37ccf43d_20012_0db22067b82b27038dbb0133cefe0a29.webp width=470 height=52 loading=lazy data-zoomable></div></div></figure>This will open a dialogue box. Under &ldquo;Scope,&rdquo; choose &ldquo;All opened files,&rdquo; then proceed with your search.</p><h4 id=searching-the-full-contents-of-the-digital-egyptian-gazette>Searching the full contents of the digital Egyptian Gazette</h4><p>To search everything in the <a href=https://github.com/dig-eg-gaz/content target=_blank rel=noopener>Digital Egyptian Gazette content repository</a>, under Find/Replace in Files > Scope, choose &ldquo;Specified path,&rdquo; then navigate to the location where you&rsquo;ve cloned your fork of the content repository. For more information about how to find this location, consult the <a href=/how-to/digitization/github-instructions/>Github tutorial</a>.</p><h3 id=b-xpath-query-bar>B) XPath query bar</h3><p>If you are searching for particular nodes rather than words, or counting nodes, it&rsquo;s easiest to use the XPath query bar, which is located near the top left of your screen.</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img alt="xpath query box oxygen" srcset="/media/xpath-query-box-oxygen_hu7fae7b412d7c2c717a4e001fad835d85_14096_de5fde7128196b968122acc01b0335ee.webp 400w,
/media/xpath-query-box-oxygen_hu7fae7b412d7c2c717a4e001fad835d85_14096_add8bd5606ddf8006d62480d2e098ec0.webp 760w,
/media/xpath-query-box-oxygen_hu7fae7b412d7c2c717a4e001fad835d85_14096_1200x1200_fit_q75_h2_lanczos_3.webp 1200w" src=/media/xpath-query-box-oxygen_hu7fae7b412d7c2c717a4e001fad835d85_14096_de5fde7128196b968122acc01b0335ee.webp width=760 height=59 loading=lazy data-zoomable></div></div></figure></p><p>The drop-down icon on the left of this box allows you to choose the scope of your search: current file, all opened files, and other options. To search the full contents of the digital Egyptian Gazette, you&rsquo;ll need to use a &ldquo;working set.&rdquo;</p><p><figure><div class="d-flex justify-content-center"><div class=w-100><img alt="xpath query box scope" srcset="/media/xpath-query-box-scope_hu4eac6cd2160000e6cef2d8414003947d_169603_7eeb3520a08038be849a1e05749fb992.webp 400w,
/media/xpath-query-box-scope_hu4eac6cd2160000e6cef2d8414003947d_169603_da1571ba9545b74e411ad72201a1c0eb.webp 760w,
/media/xpath-query-box-scope_hu4eac6cd2160000e6cef2d8414003947d_169603_1200x1200_fit_q75_h2_lanczos_3.webp 1200w" src=/media/xpath-query-box-scope_hu4eac6cd2160000e6cef2d8414003947d_169603_7eeb3520a08038be849a1e05749fb992.webp width=760 height=379 loading=lazy data-zoomable></div></div></figure></p><h4 id=set-up-a-working-set>Set up a working set</h4><p>To create a working set of files for your search, click on &ldquo;Configure XPath working sets&mldr;&rdquo; in the drop down menu pictured above. Create a &ldquo;New working set&rdquo;, give it a name, then press enter. Now click &ldquo;Add resources,&rdquo; then &ldquo;Folders,&rdquo; then select the content folder you&rsquo;ve cloned from GitHub. Click &ldquo;Done&rdquo; and &ldquo;Ok&rdquo;, and you should be ready to query the full contents.</p><h4 id=basic-xpath-queries>Basic XPath queries</h4><p>Set the scope to &ldquo;Current File,&rdquo; then try these basic queries:</p><ul><li><code>//div</code> returns a list of all the &ldquo;divs&rdquo; in your file</li><li><code>//div[@type="item"]</code> returns a list of all the item-type divs in your file</li><li><code>//div[@type="item"][contains(., 'cotton')]</code> returns a list of all the item-type divs in your file containing the word &ldquo;cotton&rdquo;</li></ul><h2 id=2-the-what-and-where-of-xpath>2. The What and Where of XPath</h2><p>Once you have the basic parameters set up, it&rsquo;s time to look a bit more carefully at the logic of XPath. XPath asks you to do two things: specify <strong>where</strong> you want to search, and specify <strong>what</strong> you want to search for.</p><h3 id=where-searches>&ldquo;Where&rdquo; searches</h3><p>We use XML to structure our issues of the <em>Egyptian Gazette</em> by page, section, item, and so on. For example, we use nesting pairs of tags to put <code>&lt;div type="item"> &lt;/div></code> inside <code>&lt;div type="section"> &lt;/div></code>, and <code>&lt;div type="section"> &lt;/div></code> inside <code>&lt;div type="page"> &lt;/div></code>.</p><p>This structure is commonly described as a &ldquo;tree.&rdquo; The root is the issue, which branches into six or eight pages, and each page branches into sections and items and paragraphs.</p><p>An XPath query shows the tree parts separated by slashes, starting from root and heading towards the branches, like so:</p><p><code>//div[@type="page"]/div[@type="section"]/div[@type="item"]/p</code></p><p>A double slash (<strong>//</strong>) tells the computer to look anywhere in the document for the item that comes next. A single slash (<strong>/</strong>) tells the computer to look only one level up the tree. What difference does this make?</p><ul><li><code>//div//head</code> would return any headline in any div in the whole document. This would not be a very good search, because it would return a huge number of results.</li><li><code>//div/div/div/div/head</code> would return any paragraph that is inside four divisions (for instance, a paragraph in an item in a section in a page). This would return fewer results.</li></ul><p>The best way to say exactly where you want to look is by using <strong>attributes</strong>. These are contained in square brackets. For example, if you want to search for the headlines within page 1 only, you would say <code>//div[@type="page"][@n="1"]//head</code>. What goes in the square brackets is the attributes you put in the <code>&lt;div></code> tag when you&rsquo;re encoding the issues.</p><p>With a little practice, you&rsquo;ll learn to search for results only in the relevant parts of the newspaper.</p><h3 id=what-searches>&ldquo;What&rdquo; searches</h3><p>After you tell XPath <em>where</em> you want it to search, you can tell it <em>what</em> you want it to return. (This is optional.) Probably the most common thing to search for is a word or words. To do this, add <code>[contains(., "searchtext")]</code> to the end of your search, putting your search word(s) between the quotation marks. For example, <code>//div[contains(., "plague")]</code> will return all divs that contain the word &ldquo;plague.&rdquo; Note that this search is case sensitive, and will not return &ldquo;PLAGUE&rdquo; and &ldquo;Plague.&rdquo; To remedy this ,use the <code>matches</code> function with the <code>'i'</code> flag, which makes the search case insensitive: <code>//div[matches(.,'the plague', 'i')]</code>.</p><p>You can also search for particular kinds of information. Add a slash to the end of the location, then tell it you want</p><ul><li><code>count()</code> &ndash; how many of these things are there?</li><li><code>string()</code> &ndash; what is the string of text this thing contains?</li><li><code>number()</code> &ndash; what number is found on this branch?</li></ul><h2 id=3-navigating-the-tree>3. Navigating the tree</h2><p>You can navigate around the tree by using commands like <code>parent::</code> or <code>following-sibling::</code> instead of the slash. These will move you up and down the tree.</p><p>For example:</p><ul><li>Return all datelines contained in a &ldquo;cable&rdquo; div type: <code>//div[@type="cable"]/parent::div//dateline</code></li><li>Return all placeNames in cable: <code>//div[@type="cable"]/parent::div//dateline//placeName</code></li></ul><h3 id=search-using-xmlid-or-feature>Search using xml:id or feature</h3><p>Many ads, templates, and sections have <code>xml:id</code> or <code>feature</code> tags embedded in them. These are meant to simplify your search. For features, use <code>//div[@feature="shippingMovements"]</code>. For tables, use <code>//table[@xml:id="deg-ta-cppa01"]</code>.</p><h2 id=4-working-with-tables>4. Working with tables</h2><p>Tables are a powerful part of the XML-encoded <em>Egyptian Gazette</em>. XPath gives us tools to return precise parts of the information these tables contain. For example:</p><ul><li>return the text contained in the cell after a cell containing the text &ldquo;P.T.&rdquo; <code>//table//cell[contains(.,'P.T.')]/following-sibling::cell[1]/text()</code>. Does not work for numbers, it seems.</li><li>return the number contained in the cell after a cell containing the text &ldquo;Augment.&rdquo; <code>//table//cell[contains(.,'Augment.')]/following-sibling::cell[1]/number()</code>. Does not work if number appears as a string (i.e. contains a comma after the thousands for example).</li><li>return the string contained in the cell after a cell containing the text &ldquo;Augment.&rdquo; <code>//table//cell[contains(.,'Augment.')]/following-sibling::cell[1]/string()</code></li><li>return the string text of the first paragraph of the div with the heading &ldquo;MARCHE DE MINET&rdquo; <code>//div//head[contains(.,'MARCHE DE MINET')]/following-sibling::p[1]/string()</code></li><li>return the value of the &ldquo;when&rdquo; attribute of dates in the third line of the Orient-Royal Mail Line ad: <code>//div[@xml:id="deg-ad-orm01"]//head/following-sibling::p[3]/date/@when</code></li></ul><p>An example of working your way through table cells, looking at prices for cotton:</p><ul><li>This query will look at all tables and return the value in the fourth cell to the right of the cell containing the word &ldquo;Cotton&rdquo;: <code>//table//cell[contains(.,'Cotton')]/following-sibling::cell[4]</code></li><li>This query will look at the &ldquo;Coton&rdquo; table (which has an xml:id of &ldquo;deg-ta-cotn01&rdquo;), and return the value in the cell to the right of the cell containing the word &ldquo;Russie&rdquo;: <code>//table[@xml:id="deg-ta-cotn01"]//cell[contains(.,'Russie')]/following-sibling::cell[1]</code></li></ul><h2 id=5-recipe-book>5. Recipe book</h2><p>The possibilities are endless. Here are some samples.</p><h3 id=searching-for-instances-of-particular-words>Searching for instances of particular words</h3><ul><li>Return all placename items that contain the word &ldquo;Aden&rdquo;: <code>//placeName[contains(.,'Aden')]</code></li></ul><h3 id=counting-instances>Counting instances</h3><ul><li>Count the number of items containing the term &rsquo;native&rsquo;: <code>count(//div[contains(., 'native')])</code></li><li>count the number of ads (divs) on page 1 (div n=&ldquo;1&rdquo;): <code>count(//div[@n="1"]//div)</code></li><li>count the number of paragraphs in the division whose heading contains &ldquo;MARCHE DE MINET&rdquo;: <code>count(//div/head[contains(.,'MARCHE DE MINET')]/following-sibling::p)</code></li></ul><h3 id=item-length>Item length</h3><ul><li>Find all paragraphs longer than 5000 characters: <code>//p[string-length() > 5000]</code></li></ul><h3 id=exclude-sectiondivpage>Exclude Section/div/Page</h3><ul><li>Search all the divs after Page 1: <code>//div[not(descendant::div[@n="1"]) and not(ancestor-or-self::div[@n="1"])]</code></li></ul><h3 id=search-for-one-word-but-not-another>Search for one word but not another</h3><ul><li>Search for paragraphs containing the word &ldquo;theatre&rdquo; but not the word &ldquo;performance&rdquo;: <code>//p[contains(.,'theatre')]/text() | //p[contains(.,'theatre')]/*[not(contains(.,'performance'))]/text()</code></li></ul><h2 id=6-searching-with-regular-expressions>6. Searching with regular expressions</h2><p>It is possible to combine regular expression and XPath searches by using the find/replace menu. Enter the regular expression you wish to search for in the Find box, and the XPath location in which you wish to search in the XPath box. &lt;!&mdash; explain further &mdash;></p><h2 id=7-export-and-manipulate-results>7. Export and manipulate results</h2><p>Right click on results, then export file. You can then <a href=https://dig-eg-gaz.github.io/how-to/digitization/regular-expression-instructions/#cleaning-xpath-results target=_blank rel=noopener>clean up these results with regular expressions</a> to remove the parts you don&rsquo;t want. After this, you can work with the results in a spreadsheet.</p><h2 id=8-xquery>8. XQuery</h2><p>More complex querying can be accomplished using XQuery.</p><p>Example, returning the date of every issue with a page 7:
<code>for $a in collection("file:/Users/whanley/GitHub/DEG-content/?select=1905-*.xml;recurse=yes") where $a//*:div[@n="7"] return $a//*:bibl/*:date</code></p><p>Identify six versus eight page issues:
<code>for $a in collection("file:/Users/whanley/GitHub/DEG-content/?select=1905-*.xml;recurse=yes") return if ($a//*:div[@n="7"]) then &lt;eight-page>{data($a//*:bibl/*:date)}&lt;/eight-page> else &lt;six-page>{data($a//*:bibl/*:date)}&lt;/six-page></code></p><h2 id=9-resources>9. Resources</h2><ul><li><a href=http://www.w3schools.com/xml/xsl_functions.asp target=_blank rel=noopener>XPath functions list</a></li><li><a href=https://www.w3.org/TR/2010/REC-xpath-functions-20101214/#func-number target=_blank rel=noopener>W3C XPath functions list</a></li><li><a href=http://www.w3schools.com/xml/xpath_intro.asp target=_blank rel=noopener>XPath tutorial</a></li><li>Got a question or comment? File an issue <a href=https://github.com/dig-eg-gaz/dig-eg-gaz.github.io/blob/master/_pages/how-to/query-instructions.md target=_blank rel=noopener>here</a>.</li></ul></div><div class=article-widget><div class=post-nav><div class=post-nav-item><div class=meta-nav>Previous</div><a href=/how-to/digitization/tagging-people-and-places-instructions/ rel=next>Tagging people and places</a></div><div class=post-nav-item><div class=meta-nav>Next</div><a href=/how-to/digitization/regular-expression-instructions/ rel=prev>Regular expressions instructions</a></div></div></div></div><div class=body-footer><p>Last updated on Sep 30, 2016</p></div></article><footer class=site-footer><p class="powered-by copyright-license-text">This work is licensed under <a href=https://creativecommons.org/licenses/by-nc-sa/4.0 rel="noopener noreferrer" target=_blank>CC BY NC SA 4.0</a></p><p class="powered-by footer-license-icons"><a href=https://creativecommons.org/licenses/by-nc-sa/4.0 rel="noopener noreferrer" target=_blank aria-label="Creative Commons"><i class="fab fa-creative-commons fa-2x" aria-hidden=true></i>
<i class="fab fa-creative-commons-by fa-2x" aria-hidden=true></i>
<i class="fab fa-creative-commons-nc fa-2x" aria-hidden=true></i>
<i class="fab fa-creative-commons-sa fa-2x" aria-hidden=true></i></a></p><p class=powered-by>Published with <a href="https://wowchemy.com/?utm_campaign=poweredby" target=_blank rel=noopener>Wowchemy</a> — the free, <a href=https://github.com/wowchemy/wowchemy-hugo-themes target=_blank rel=noopener>open source</a> website builder that empowers creators.</p></footer></main></div></div></div><div class=page-footer></div><script src=/js/vendor-bundle.min.32ee83730ed883becad04bc5170512cc.js></script>
<script src=https://cdn.jsdelivr.net/gh/bryanbraun/anchorjs@4.2.2/anchor.min.js integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin=anonymous></script>
<script>anchors.add()</script><script id=search-hit-fuse-template type=text/x-template>
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script><script src=https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin=anonymous></script>
<script id=page-data type=application/json>{"use_headroom":false}</script><script src=/en/js/wowchemy.min.85290d887e7fcdd400ccb3ffb9bcd3e3.js></script></body></html>